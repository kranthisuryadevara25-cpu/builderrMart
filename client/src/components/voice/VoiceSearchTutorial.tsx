import { useState } from 'react';
import { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';
import { Button } from '@/components/ui/button';
import { Badge } from '@/components/ui/badge';
import { Alert, AlertDescription } from '@/components/ui/alert';
import { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';
import { 
  Mic,\n  Volume2,\n  Settings,\n  HelpCircle,\n  CheckCircle2,\n  AlertTriangle,\n  Monitor,\n  Smartphone,\n  Chrome,\n  Play\n} from 'lucide-react';\nimport { useVoiceSearch } from '@/hooks/useVoiceSearch';\n\nexport function VoiceSearchTutorial() {\n  const [currentStep, setCurrentStep] = useState(0);\n  const [demoTranscript, setDemoTranscript] = useState('');\n  \n  const { isSupported, isListening, startListening, stopListening } = useVoiceSearch({\n    onResult: (result) => setDemoTranscript(result)\n  });\n\n  const tutorialSteps = [\n    {\n      title: 'Find the Microphone Icon',\n      icon: <Mic className=\"w-6 h-6 text-blue-600\" />,\n      content: (\n        <div className=\"space-y-3\">\n          <p>Look for the microphone icon üé§ next to any search box in the application.</p>\n          <div className=\"bg-blue-50 p-4 rounded-lg border\">\n            <p className=\"text-sm text-blue-800\">\n              <strong>Location:</strong> The mic icon appears on the right side of search inputs in:\n            </p>\n            <ul className=\"list-disc list-inside mt-2 text-sm text-blue-700 space-y-1\">\n              <li>Categories page</li>\n              <li>Vendors page</li>\n              <li>Products page</li>\n              <li>Shop page</li>\n              <li>Orders page</li>\n              <li>Vendor chat</li>\n            </ul>\n          </div>\n        </div>\n      )\n    },\n    {\n      title: 'Click to Start',\n      icon: <Play className=\"w-6 h-6 text-green-600\" />,\n      content: (\n        <div className=\"space-y-3\">\n          <p>Click the microphone icon to start voice recognition.</p>\n          <Alert>\n            <Mic className=\"w-4 h-4\" />\n            <AlertDescription>\n              Your browser may ask for microphone permission. Click \"Allow\" to enable voice search.\n            </AlertDescription>\n          </Alert>\n          <div className=\"bg-green-50 p-4 rounded-lg border\">\n            <p className=\"text-sm text-green-800\">\n              <strong>What happens:</strong>\n            </p>\n            <ul className=\"list-disc list-inside mt-2 text-sm text-green-700 space-y-1\">\n              <li>Icon changes to red (recording)</li>\n              <li>Placeholder text shows \"Listening...\"</li>\n              <li>You'll see a notification confirming voice search started</li>\n            </ul>\n          </div>\n        </div>\n      )\n    },\n    {\n      title: 'Speak Clearly',\n      icon: <Volume2 className=\"w-6 h-6 text-orange-600\" />,\n      content: (\n        <div className=\"space-y-3\">\n          <p>Speak your search query clearly and at a normal pace.</p>\n          <div className=\"bg-orange-50 p-4 rounded-lg border\">\n            <p className=\"text-sm text-orange-800 mb-2\">\n              <strong>Tips for better recognition:</strong>\n            </p>\n            <ul className=\"list-disc list-inside text-sm text-orange-700 space-y-1\">\n              <li>Speak directly into your device's microphone</li>\n              <li>Use a normal, clear speaking voice</li>\n              <li>Avoid background noise</li>\n              <li>Pause briefly before and after speaking</li>\n              <li>Use simple, clear words</li>\n            </ul>\n          </div>\n          <div className=\"bg-yellow-50 p-3 rounded-lg border\">\n            <p className=\"text-sm text-yellow-800\">\n              <strong>Example searches:</strong> \"cement\", \"steel rods\", \"bathroom tiles\", \"electrical wire\"\n            </p>\n          </div>\n        </div>\n      )\n    },\n    {\n      title: 'Automatic Search',\n      icon: <CheckCircle2 className=\"w-6 h-6 text-purple-600\" />,\n      content: (\n        <div className=\"space-y-3\">\n          <p>Once speech is recognized, the search will automatically execute.</p>\n          <div className=\"bg-purple-50 p-4 rounded-lg border\">\n            <p className=\"text-sm text-purple-800 mb-2\">\n              <strong>What you'll see:</strong>\n            </p>\n            <ul className=\"list-disc list-inside text-sm text-purple-700 space-y-1\">\n              <li>Your spoken words appear in the search box</li>\n              <li>Search results update automatically</li>\n              <li>Microphone returns to normal state</li>\n              <li>Voice recognition stops automatically</li>\n            </ul>\n          </div>\n        </div>\n      )\n    }\n  ];\n\n  const troubleshootingTips = [\n    {\n      problem: \"Can't see microphone icon\",\n      solution: \"Make sure you're using a supported browser (Chrome, Edge). Refresh the page if needed.\",\n      icon: <Monitor className=\"w-5 h-5 text-blue-600\" />\n    },\n    {\n      problem: \"Microphone permission denied\",\n      solution: \"Click the microphone icon in your browser's address bar and select 'Allow'.\",\n      icon: <Settings className=\"w-5 h-5 text-orange-600\" />\n    },\n    {\n      problem: \"Voice not recognized\",\n      solution: \"Speak more clearly, check microphone settings, ensure stable internet connection.\",\n      icon: <Volume2 className=\"w-5 h-5 text-red-600\" />\n    },\n    {\n      problem: \"Feature not working on mobile\",\n      solution: \"Voice search works best on mobile Chrome or Edge browsers. Try switching browsers.\",\n      icon: <Smartphone className=\"w-5 h-5 text-green-600\" />\n    }\n  ];\n\n  const tryDemo = () => {\n    if (!isSupported) return;\n    setDemoTranscript('');\n    startListening();\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <HelpCircle className=\"w-6 h-6 text-blue-600\" />\n            Voice Search Tutorial\n          </CardTitle>\n        </CardHeader>\n        <CardContent>\n          <Tabs defaultValue=\"tutorial\" className=\"w-full\">\n            <TabsList className=\"grid w-full grid-cols-3\">\n              <TabsTrigger value=\"tutorial\">Step by Step</TabsTrigger>\n              <TabsTrigger value=\"demo\">Try Demo</TabsTrigger>\n              <TabsTrigger value=\"troubleshooting\">Troubleshooting</TabsTrigger>\n            </TabsList>\n            \n            <TabsContent value=\"tutorial\" className=\"space-y-6\">\n              {/* Tutorial Steps */}\n              <div className=\"space-y-4\">\n                {tutorialSteps.map((step, index) => (\n                  <Card key={index} className={`${currentStep === index ? 'border-blue-500' : ''}`}>\n                    <CardHeader className=\"pb-3\">\n                      <CardTitle className=\"text-lg flex items-center gap-3\">\n                        {step.icon}\n                        Step {index + 1}: {step.title}\n                      </CardTitle>\n                    </CardHeader>\n                    <CardContent>\n                      {step.content}\n                    </CardContent>\n                  </Card>\n                ))}\n              </div>\n              \n              {/* Navigation */}\n              <div className=\"flex justify-between\">\n                <Button\n                  variant=\"outline\"\n                  onClick={() => setCurrentStep(Math.max(0, currentStep - 1))}\n                  disabled={currentStep === 0}\n                >\n                  Previous Step\n                </Button>\n                <Badge variant=\"secondary\">\n                  Step {currentStep + 1} of {tutorialSteps.length}\n                </Badge>\n                <Button\n                  onClick={() => setCurrentStep(Math.min(tutorialSteps.length - 1, currentStep + 1))}\n                  disabled={currentStep === tutorialSteps.length - 1}\n                >\n                  Next Step\n                </Button>\n              </div>\n            </TabsContent>\n            \n            <TabsContent value=\"demo\" className=\"space-y-4\">\n              {/* Interactive Demo */}\n              <Card>\n                <CardHeader>\n                  <CardTitle className=\"flex items-center gap-2\">\n                    <Play className=\"w-5 h-5\" />\n                    Interactive Voice Search Demo\n                  </CardTitle>\n                </CardHeader>\n                <CardContent className=\"space-y-4\">\n                  {isSupported ? (\n                    <div className=\"space-y-4\">\n                      <div className=\"flex items-center gap-4\">\n                        <Button\n                          onClick={isListening ? stopListening : tryDemo}\n                          variant={isListening ? 'destructive' : 'default'}\n                          className=\"flex items-center gap-2\"\n                        >\n                          <Mic className={`w-4 h-4 ${isListening ? 'animate-pulse' : ''}`} />\n                          {isListening ? 'Stop Demo' : 'Try Voice Search'}\n                        </Button>\n                      </div>\n                      \n                      {isListening && (\n                        <Alert>\n                          <Volume2 className=\"w-4 h-4\" />\n                          <AlertDescription>\n                            Listening... Try saying \"cement\" or \"steel rods\"\n                          </AlertDescription>\n                        </Alert>\n                      )}\n                      \n                      {demoTranscript && (\n                        <div className=\"p-4 bg-green-50 rounded-lg border\">\n                          <p className=\"text-green-800\">\n                            <CheckCircle2 className=\"w-4 h-4 inline mr-2\" />\n                            Recognized: \"{demoTranscript}\"\n                          </p>\n                        </div>\n                      )}\n                    </div>\n                  ) : (\n                    <Alert>\n                      <AlertTriangle className=\"w-4 h-4\" />\n                      <AlertDescription>\n                        Voice search demo not available. Your browser doesn't support speech recognition.\n                      </AlertDescription>\n                    </Alert>\n                  )}\n                </CardContent>\n              </Card>\n            </TabsContent>\n            \n            <TabsContent value=\"troubleshooting\" className=\"space-y-4\">\n              {/* Troubleshooting Guide */}\n              <div className=\"space-y-4\">\n                {troubleshootingTips.map((tip, index) => (\n                  <Card key={index}>\n                    <CardContent className=\"pt-6\">\n                      <div className=\"flex items-start gap-3\">\n                        {tip.icon}\n                        <div className=\"flex-1\">\n                          <h4 className=\"font-semibold text-gray-900 mb-2\">{tip.problem}</h4>\n                          <p className=\"text-sm text-gray-600\">{tip.solution}</p>\n                        </div>\n                      </div>\n                    </CardContent>\n                  </Card>\n                ))}\n              </div>\n              \n              {/* Browser Compatibility */}\n              <Card>\n                <CardHeader>\n                  <CardTitle className=\"flex items-center gap-2\">\n                    <Chrome className=\"w-5 h-5\" />\n                    Browser Compatibility\n                  </CardTitle>\n                </CardHeader>\n                <CardContent>\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                    <div className=\"space-y-2\">\n                      <h4 className=\"font-semibold text-green-700\">‚úÖ Fully Supported</h4>\n                      <ul className=\"text-sm text-gray-600 space-y-1\">\n                        <li>‚Ä¢ Chrome (Desktop & Mobile)</li>\n                        <li>‚Ä¢ Microsoft Edge</li>\n                        <li>‚Ä¢ Chrome-based browsers</li>\n                      </ul>\n                    </div>\n                    <div className=\"space-y-2\">\n                      <h4 className=\"font-semibold text-red-700\">‚ùå Limited/No Support</h4>\n                      <ul className=\"text-sm text-gray-600 space-y-1\">\n                        <li>‚Ä¢ Safari (partial support)</li>\n                        <li>‚Ä¢ Firefox (no support)</li>\n                        <li>‚Ä¢ Internet Explorer</li>\n                        <li>‚Ä¢ Older browsers</li>\n                      </ul>\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n            </TabsContent>\n          </Tabs>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}"